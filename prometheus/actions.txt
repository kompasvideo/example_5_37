minikube.exe start
minikube dashboard


helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update

---------- Вариант 2 - устанавливаем весь стек - прометей + оператор + графана

helm install stack prometheus-community/kube-prometheus-stack -f c:\data\otus\msa\msa\prometheus\prometheus.yaml

kubectl apply -f rs.yaml -f service.yaml -f service-monitor.yaml

minikube.exe service metrics-demo

kubectl port-forward service/prometheus-operated  9090

ab -n 500 -c 50 http://localhost:8090/api/a # поменять урл на реальный (выхлоп minikube.exe service metrics-demo)

FOR /L %N IN () DO c:\data\otus\msa\Apache24\bin\ab.exe -n 50 -c 10 http://localhost:8090/api/a # аналогично поменять урл


---------

kubectl port-forward service/stack-grafana  9000:80
admin / prom-operator